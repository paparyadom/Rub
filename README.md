## Протокол файлового сервера
* Клиенты файлового сервера устанавливают TCP-соединения с сервером и отправляют текстовые сообщения (команды).
* Каждая команда представлена набором латинских символов. Команда может состять из нескольких слов - данные слова пишутся через пробел.  
* В зависимости от команды сервер отсылает пользователю информационное сообщение о статусе выполнения
* Если команда не известна серверу, он высылает в ответ ошибку с сообщением: `no such command`.
  
Для организации связи реализовано два протокола TCD8 и SimpleProto. При подключении пользователя сервер отправляет запрос "id?" для получения id пользователя

### SimpleProto
Данный протокол отправялет данные "как есть" - без дополнительных полей. 
Отправка файлов на сервер данным протоколом не предусмотрена

### TCD8
Формат сообщений:
* клиент - отправка запроса (BaseProtocol.send_request) : **_полная длина посылки [8 bytes] + длина команды [8 bytes] + длина данных для отправки [8 bytes] + команда + данные (если отправляем файл)_**
* сервер - отправка ответа (BaseProtocol.send_data): **_полная длина посылки [8 bytes] + данные_**

Данный протокол поддерживает отправку файлов на сервер, а также дозагрузку файлов, если во время отправки соеднинение было разорвано.
Процесс общения при отправки файла выглядит следующим образом:
* -> клиент отправляет запрос на отправку файла (BaseProtocl.file_send_request): **_полная длина посылки [8 bytes] + длина команды [8 bytes] + длина данных для отправки (=0) [8 bytes] + команда_**
* -> сервер проверяет что в каталоге хранения файла нет его части (filename.extenstion.part) 
  <br/>Если нет - отправялем в ответ сообщение формата:  **_полная длина посылки **[8 bytes] + 0 [8 bytes]_**
  <br/>Если есть - отправялем в ответ сообщение формата:  **_полная длина посылки [8 bytes] + размер сохраненной части файла в байтах**
* -> клиент получает ответ и отправляет файл целиком или его недостающую часть.


### Поддерживаемые команды
| Команда     | Тело команды                 | Тело ответа             | Ошибки        | Описание        |
|-------------|------------------------------|-------------------------|---------------|-----------------|
| whoami      | None                        |**id** = id пользователя<br/> **Restrictions** = словарь с установленными правами доступа<br/>**current path** = текущий каталог <br/>**home path** = домашний каталог<br/>**address** = (ip адрес, порт) | None| Информация о пользователе |
| where       	|None														|[>] you are now in "путь"						|None|Отображение пути текущего каталога|
| list    		|None или абсолютный путь или относительный путь			|[>] 'путь'<br/>folder> .. каталог<br/>> .. файл| -| Отображение списка папок и файлов|
| jump   		|None или абсолютный путь или относительный путь			|[>] path changed to 'путь' 				| -| Сменить текущий каталог|
| info 			|абсолютный путь или относительный путь каталога или файла |[>] 'путь': <br/> Size: ...<br/> Permissions: ...<br/> Owner: ...<br/> Created: ...<br/> Last modified: ...<br/> Last accessed: ...<br/> | None| Отображение информации о файле или каталоге
| nefo   		|абсолютный путь или относительный путь каталога			|[>] successfully created folder 'путь'	| None| Создание нового каталога|
| defo    		|абсолютный путь или относительный путь каталога			|[>] successfully deleted folder 'путь'	| None| Удаление каталога |
| defi    		|абсолютный путь или относительный путь файла				|[>] successfully deleted file 'путь до файла'| None| Удаление файла |  
| open  		|абсолютный путь или относительный путь файла				|данные файла| None| Открыть файл |    
| send<br/>(только TCD8)|Путь до посылаемого файла + путь сохранения		|[>] file was successfully saved to "путь до файла" | None | Отправка файла|


### Расширенные команды
| Команда     | Тело команды                 | Тело ответа             | Ошибки        | Описание        |
|-------------|------------------------------|-------------------------|---------------|-----------------|
|acts| None| Active users: <br/>[number] ('ip' , 'порт') - имя пользователя <br/> Stored users: <br/> имя пользователя  <br/> ... | None | Отображение списка подключенных пользователей и сохраненных|
|delr|delr имя пользователя -[rwx] путь до каталога или файла | UserData(uid='имя пользователя', current_path='текущий каталог', restrictions={'w': ['...'], 'r': ['...'], 'x': ['...']}, home_path='домашний каталог') | None | удаление запретов пользователя|  
|setr|setr имя пользователя -[rwx] путь до каталога или файла | UserData(uid='имя пользователя', current_path='текущий каталог', restrictions={'w': ['...'], 'r': ['...'], 'x': ['...']}, home_path='домашний каталог') | None | добавление запретов пользователя|  
|uinf|имя пользователя| User 'имя' info:<br/> uid - имя<br/>current_path - 'текущий каталог'<br/>restrictions - словарь с правами доступа<br/>home_path - домашний каталог|None|Вывод информации о пользователе|







